
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>jmshah Chatbot</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body {
      background: linear-gradient(to right, #dfe9f3, #ffffff);
      font-family: 'Segoe UI', sans-serif;
    }
    .chat-container {
      max-width: 800px;
      margin: 50px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .chat-box {
      height: 400px;
      overflow-y: auto;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 12px 12px 0 0;
    }
    .bubble {
      padding: 12px 18px;
      margin-bottom: 10px;
      border-radius: 20px;
      max-width: 75%;
      word-wrap: break-word;
    }
    .user {
      background-color: #d1e7dd;
      align-self: flex-end;
      margin-left: auto;
    }
    .bot {
      background-color: #ffeeba;
      align-self: flex-start;
      margin-right: auto;
    }
    .loader {
      width: 60px;
      height: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .loader span {
      display: inline-block;
      width: 10px;
      height: 10px;
      background: #aaa;
      border-radius: 50%;
      animation: bounce 0.6s infinite alternate;
    }
    .loader span:nth-child(2) { animation-delay: 0.2s; }
    .loader span:nth-child(3) { animation-delay: 0.4s; }
    @keyframes bounce {
      to {
        transform: translateY(-8px);
        background: #333;
      }
    }
  </style>
</head>
<body>

<div class="container chat-container p-0">
  <div class="bg-primary text-white text-center py-3 rounded-top">
    <h4>ü§ñ jmshah Chatbot</h4>
  </div>
  <div class="chat-box d-flex flex-column" id="chatBox"></div>
  <div class="p-3 border-top">
    <div class="input-group">
      <input type="text" id="userInput" class="form-control" placeholder="Type your message...">
      <button class="btn btn-success" onclick="sendMessage()">Send</button>
    </div>
  </div>
</div>

<script>
  const API_KEY = "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";

  const chatBox = document.getElementById("chatBox");
  const userInput = document.getElementById("userInput");

  userInput.addEventListener("keydown", function(event) {
    if (event.key === "Enter") sendMessage();
  });

  function addBubble(sender, message, type) {
    const bubble = document.createElement("div");
    bubble.className = `bubble ${type}`;
    bubble.innerHTML = `<strong>${sender}:</strong><br>${message}`;
    chatBox.appendChild(bubble);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function addLoader() {
    const loader = document.createElement("div");
    loader.className = "bubble bot loader-bubble";
    loader.id = "loading";
    loader.innerHTML = `
      <div class="loader">
        <span></span><span></span><span></span>
      </div>`;
    chatBox.appendChild(loader);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function removeLoader() {
    const loader = document.getElementById("loading");
    if (loader) loader.remove();
  }

  async function sendMessage() {
    const message = userInput.value.trim();
    if (!message) return;

    addBubble("You", message, "user");
    userInput.value = "";
    addLoader();

    try {
      const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: "openai/gpt-3.5-turbo",
          messages: [
            {
              role: "system",
              content: "You are jmshah, an AI chatbot assistant who knows Janmejay Shah ‚Äî a student of computer engineering, passionate about AI, coding, and helping others."
            },
            { role: "user", content: message }
          ]
        })
      });

      const data = await response.json();
      removeLoader();
      const reply = data.choices[0].message.content;
      addBubble("jmshah", reply, "bot");

    } catch (err) {
      removeLoader();
      addBubble("jmshah", "‚ùå An error occurred while getting response.", "bot");
    }
  }
</script>

</body>
</html>
